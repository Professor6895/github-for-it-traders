(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"4mHn":function(e,a,t){var s=t("iCiL");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(s,r);s.locals&&(e.exports=s.locals)},MeZ2:function(e,a,t){"use strict";t.r(a);var s=t("o0o1"),r=t.n(s),n=t("U87P"),i=t("uBql"),l=t("5XpT"),o=t("jHpe");t("y1X9"),t("QWvX"),t("hL/g"),t("yr/+");function c(e,a,t,s,r,n,i){try{var l=e[n](i),o=l.value}catch(e){return void t(e)}l.done?a(o):Promise.resolve(o).then(s,r)}function d(e){return function(){var a=this,t=arguments;return new Promise((function(s,r){var n=e.apply(a,t);function i(e){c(n,s,r,i,l,"next",e)}function l(e){c(n,s,r,i,l,"throw",e)}i(void 0)}))}}var u={data:function(){return{loading:!0,brands:[],brand_popup:!1,brand:{meta:{}},image_preview:null}},components:{MetaFields:n.a,PrismEditor:l.a},mounted:function(){this.fetchBrands()},methods:{highlighter:function(e){return Object(o.highlight)(e,o.languages.js)},fetchBrands:function(){var e=this;return d(r.a.mark((function a(){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.$http.get("/api/admin/product-brands");case 4:t=a.sent,e.brands=t.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e.errorNotification("Something went wrong!! Please retry");case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])})))()},imageUploaded:function(){var e=this.$refs.brand_thumbnail_image.files[0];this.image_preview=URL.createObjectURL(e),this.brand.image=e},clearImage:function(){this.brand.image=null,this.image_preview=null,this.$refs.brand_thumbnail_image.value=""},saveBrand:function(){var e=this;return d(r.a.mark((function a(){var t,s,n,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$validator.validateAll();case 2:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:return e.$vs.loading({container:"#loading--container"}),a.prev=6,t={name:e.brand.name,image:e.brand.image,description:e.brand.description,meta:JSON.stringify(e.brand.meta),custom_code:e.brand.custom_code},s="/api/admin/product-brands",e.brand.id&&(s="/api/admin/product-brands/".concat(e.brand.id),t._method="PATCH",t.slug=e.brand.slug),n=Object(i.a)(t),a.next=13,e.$http.post(s,n);case 13:(l=a.sent).data.success&&(e.successNotification(l.data.message),e.fetchBrands(),e.brand_popup=!1),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(6),Object(i.e)(e.errors,a.t0),e.errorNotification("Something went wrong! Please retry!!");case 21:return a.prev=21,e.$vs.loading.close("#loading--container > .con-vs-loading"),a.finish(21);case 24:case"end":return a.stop()}}),a,null,[[6,17,21,24]])})))()},editBrand:function(e){this.brand=_.cloneDeep(e),this.image_preview=this.brand.brand_image.thumb,this.brand_popup=!0},deleteBrand:function(e){var a,t=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to delete this brand?",accept:(a=d(r.a.mark((function a(){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("/api/admin/product-brands/".concat(e));case 2:(s=a.sent).data.success?(t.successNotification(s.data.message),t.fetchBrands()):t.errorNotification(s.data.message);case 4:case"end":return a.stop()}}),a)}))),function(){return a.apply(this,arguments)})})}},watch:{brand_popup:function(e){e||(this.brand={meta:{}},this.errors.clear(),this.image_preview=null)}}},v=(t("MvVT"),t("KHd+")),m=Object(v.a)(u,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("vs-popup",{staticClass:"popup-lg",attrs:{title:"Brand Detail",active:e.brand_popup},on:{"update:active":function(a){e.brand_popup=a}}},[t("div",{staticClass:"vs-con-loading__container",attrs:{id:"loading--container"}},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"name",label:"Brand Name"},model:{value:e.brand.name,callback:function(a){e.$set(e.brand,"name",a)},expression:"brand.name"}}),e._v(" "),t("p",[e.errors.has("name")?t("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))]):e._e()]),e._v(" "),e.brand.id?t("div",{staticClass:"w-full mt-4"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"name",label:"Brand Slug"},model:{value:e.brand.slug,callback:function(a){e.$set(e.brand,"slug",a)},expression:"brand.slug"}}),e._v(" "),t("p",[e.errors.has("slug")?t("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("slug")))]):e._e()])],1):e._e(),e._v(" "),t("div",{staticClass:"w-full mt-4"},[e.image_preview?t("div",{staticClass:"image-preview-container"},[t("div",{staticClass:"text-right float-right mr-10"},[t("vs-button",{staticClass:"image-remove--button",attrs:{radius:"",size:"small",color:"danger",type:"filled","icon-pack":"feather",icon:"icon-x"},on:{click:e.clearImage}})],1),e._v(" "),t("img",{attrs:{src:e.image_preview,alt:""}})]):e._e(),e._v(" "),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"image|size:1024",expression:"'image|size:1024'"}],ref:"brand_thumbnail_image",staticClass:"hidden",attrs:{type:"file",name:"thumbnail",accept:"image/*"},on:{change:e.imageUploaded}}),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("thumbnail"),expression:"errors.has('thumbnail')"}],staticClass:"text-danger text-sm mb-3"},[e._v("\n          "+e._s(e.errors.first("thumbnail"))+"\n        ")]),e._v(" "),t("vs-button",{attrs:{color:"primary",type:"border",size:"small"},on:{click:function(a){return e.$refs.brand_thumbnail_image.click()}}},[e._v("Thumbnail Image")])],1),e._v(" "),t("div",{staticClass:"vx-col mt-4"},[t("label",{staticClass:"vs-input--label",attrs:{for:""}},[e._v("Description")]),e._v(" "),t("q-editor",{model:{value:e.brand.description,callback:function(a){e.$set(e.brand,"description",a)},expression:"brand.description"}})],1),e._v(" "),t("MetaFields",{model:{value:e.brand.meta,callback:function(a){e.$set(e.brand,"meta",a)},expression:"brand.meta"}}),e._v(" "),t("div",{staticClass:"vx-col mt-4"},[t("label",{staticClass:"vs-input--label",attrs:{for:""}},[e._v("Custom Code")]),e._v(" "),t("prism-editor",{staticClass:"my-editor",attrs:{"line-numbers":"",highlight:e.highlighter},model:{value:e.brand.custom_code,callback:function(a){e.$set(e.brand,"custom_code",a)},expression:"brand.custom_code"}})],1),e._v(" "),t("vs-button",{staticClass:"mr-3 mt-5",on:{click:e.saveBrand}},[e._v("Submit")])],1)]),e._v(" "),e.loading?t("pageLoader"):t("vx-card",{staticClass:"card-padding-5"},[t("vs-table",{attrs:{search:"",stripe:"",data:e.brands,"max-items":"40",pagination:""},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.data;return e._l(s,(function(a,s){return t("vs-tr",{key:s,attrs:{data:a}},[t("vs-td",[t("img",{attrs:{src:a.brand_image.thumb,alt:"",width:"100px"}})]),e._v(" "),t("vs-td",[e._v(e._s(a.name))]),e._v(" "),t("vs-td",[e._v(e._s(a.slug))]),e._v(" "),t("vs-td",[e._v(e._s(a.images_count)+"    \n            "),t("router-link",{attrs:{to:{name:"admin-product-brands-images",params:{id:a.id}}}},[t("vs-button",{attrs:{size:"small"}},[e._v("View Images")])],1)],1),e._v(" "),t("vs-td",[e.checkPermission("edit-brand")?t("vs-button",{staticClass:"table-action--buttons",attrs:{radius:"",color:"warning",type:"filled",size:"small",icon:"create"},on:{click:function(t){return e.editBrand(a)}}}):e._e(),e._v(" "),e.checkPermission("delete-brand")?t("vs-button",{staticClass:"table-action--buttons",attrs:{radius:"",size:"small",color:"danger",type:"filled",icon:"delete"},on:{click:function(t){return e.deleteBrand(a.id)}}}):e._e()],1)],1)}))}}])},[t("template",{slot:"header"},[t("strong",[e._v("Total :")]),e._v("\n         "+e._s(e.brands.length)+"    \n        "),e._v(" "),e.checkPermission("add-brand")?t("vs-button",{attrs:{color:"primary",size:"small",type:"border"},on:{click:function(a){e.brand_popup=!0}}},[e._v("Add Brand")]):e._e()],1),e._v(" "),t("template",{slot:"thead"},[t("vs-th",[e._v("Image")]),e._v(" "),t("vs-th",{attrs:{"sort-key":"name"}},[e._v("Name")]),e._v(" "),t("vs-th",[e._v("Slug")]),e._v(" "),t("vs-th",[e._v("Images")]),e._v(" "),t("vs-th",[e._v("Actions")])],1)],2)],1)],1)}),[],!1,null,"b32b54ea",null);a.default=m.exports},MvVT:function(e,a,t){"use strict";t("4mHn")},U87P:function(e,a,t){"use strict";var s={props:{value:{type:Object,required:!0},small:{type:Boolean,default:!1}},watch:{value:function(){this.$emit("input",this.value)}}},r=t("KHd+"),n=Object(r.a)(s,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mt-2",class:{"md:w-1/2":!e.small}},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:70",expression:"'max:70'"}],staticClass:"w-full",attrs:{name:"meta_title",maxlength:"100",label:"Meta Title"},model:{value:e.value.meta_title,callback:function(a){e.$set(e.value,"meta_title",a)},expression:"value.meta_title"}}),e._v(" "),t("p",[e.errors.has("meta_title")?t("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_title")))]):e._e()])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2",class:{"md:w-1/2":!e.small}},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:180",expression:"'max:180'"}],staticClass:"w-full",attrs:{name:"meta_keywords",label:"Meta Keywords",maxlength:"180"},model:{value:e.value.meta_keywords,callback:function(a){e.$set(e.value,"meta_keywords",a)},expression:"value.meta_keywords"}}),e._v(" "),t("p",[e.errors.has("meta_keywords")?t("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_keywords")))]):e._e()])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:180",expression:"'max:180'"}],staticClass:"w-full",attrs:{name:"meta_description",label:"Meta Description",maxlength:"180"},model:{value:e.value.meta_description,callback:function(a){e.$set(e.value,"meta_description",a)},expression:"value.meta_description"}}),e._v(" "),t("p",[e.errors.has("meta_description")?t("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_description")))]):e._e()])],1)])}),[],!1,null,null,null);a.a=n.exports},iCiL:function(e,a,t){(e.exports=t("I1BE")(!1)).push([e.i,".my-editor[data-v-b32b54ea]{height:300px;font-family:Fira code,Fira Mono,Consolas,Menlo,Courier,monospace;font-size:14px;line-height:1.5}[dir] .my-editor[data-v-b32b54ea]{background:#f3f3f3;padding:5px}.prism-editor__textarea[data-v-b32b54ea]:focus{outline:none}",""])}}]);