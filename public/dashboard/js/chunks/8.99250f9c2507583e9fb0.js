(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+/GB":function(t,e,a){"use strict";var r=a("EUZL"),s=a.n(r),n={props:{onSuccess:{type:Function,required:!0}},data:function(){return{excelData:{header:null,results:null,meta:null}}},methods:{generateData:function(t){var e=t.header,a=t.results,r=t.meta;this.excelData.header=e,this.excelData.results=a,this.excelData.meta=r,this.onSuccess&&this.onSuccess(this.excelData)},getHeaderRow:function(t){var e,a=[],r=s.a.utils.decode_range(t["!ref"]),n=r.s.r;for(e=r.s.c;e<=r.e.c;++e){var i=t[s.a.utils.encode_cell({c:e,r:n})],o="UNKNOWN "+e;i&&i.t&&(o=s.a.utils.format_cell(i)),a.push(o)}return a},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleDrop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;if(1===e.length){var a=e[0];if(!this.isExcel(a))return this.$vs.notify({title:"Login Attempt",text:"Only supports upload .xlsx, .xls, .csv suffix files",iconPack:"feather",icon:"icon-alert-circle",color:"warning"}),!1;this.uploadFile(a)}else this.$vs.notify({title:"Login Attempt",text:"Only support uploading one file!",iconPack:"feather",icon:"icon-alert-circle",color:"warning"})},readerData:function(t){var e=this;return new Promise((function(a){var r=new FileReader;r.onload=function(t){var r=t.target.result,n=s.a.read(r,{type:"array"}),i=n.SheetNames[0],o=n.Sheets[i],c=e.getHeaderRow(o),l=s.a.utils.sheet_to_json(o),d={sheetName:i};e.generateData({header:c,results:l,meta:d}),a()},r.readAsArrayBuffer(t)}))},handleClick:function(t){var e=t.target.files[0];e&&this.uploadFile(e)},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)},uploadFile:function(t){this.$refs.fileInput.value=null,this.readerData(t)}}},i=a("KHd+"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"excel-import"},[a("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.handleClick}}),t._v(" "),a("div",{staticClass:"px-8 py-5 cursor-pointer text-center border-2 border-dashed d-theme-border-grey-light d-theme-dark-bg text-xl",on:{click:function(e){return t.$refs.fileInput.click()},drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[a("feather-icon",{staticClass:"block",attrs:{icon:"UploadCloudIcon",svgClasses:"h-16 w-16 stroke-current text-grey"}}),t._v(" "),a("span",[t._v("Drop Excel File or ")]),t._v(" "),a("span",{staticClass:"font-medium text-primary",on:{click:function(e){return e.stopPropagation(),t.$refs.fileInput.click()}}},[t._v("Browse")])],1)])}),[],!1,null,null,null);e.a=o.exports},0:function(t,e){},"0VA/":function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r),n=a("+/GB"),i=a("LvDl"),o=a.n(i);function c(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(t){c(n,r,s,i,o,"next",t)}function o(t){c(n,r,s,i,o,"throw",t)}i(void 0)}))}}var d={components:{ImportExcel:n.a},data:function(){return{help_popup:!1,importing:!1,import_progress:0,tableData:[],validated:!1,validation:{requiredHeaders:["name","sku","description","price","categories","quantity"],headerDifferences:[]},header:[],sheetName:"",server_side_validated:!1,server_side_validation_messages:[],server_side_error_popup:!1,import_files:[],product_images_popup:!1}},mounted:function(){this.fetchImportImages()},methods:{fetchImportImages:function(){var t=this;return l(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/api/admin/data-import/product/get-import-images");case 3:a=e.sent,t.import_files=a.data,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},loadDataInTable:function(t){var e=t.results,a=t.header,r=t.meta;this.header=a,this.tableData=e,this.sheetName=r.sheetName,this.validation.headerDifferences=o.a.difference(this.validation.requiredHeaders,this.header),this.server_side_validation_messages=[],this.server_side_validated=!1,this.validated=!1},resetComponenet:function(){this.header=[],this.tableData=[],this.sheetName="",this.validated=!1,this.importing=!1,this.import_progress=0},importProducts:function(){var t=this;return l(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.importing=!0,a={onUploadProgress:function(e){var a=Math.floor(100*e.loaded/e.total);t.import_progress=a-5}},e.next=5,t.$http.post("/api/admin/data-import/product/import-products",{products:t.tableData},a);case 5:(r=e.sent).data.success&&t.successNotification(r.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.errorNotification("Something went wrong while importing!! Please recheck the data and try again");case 12:return e.prev=12,t.import_progress=100,t.resetComponenet(),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})))()},validateProducts:function(){var t=this;return l(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$vs.loading({container:"#loading--container"}),e.next=4,t.$http.post("/api/admin/data-import/product/validate-products",{products:t.tableData});case 4:a=e.sent,t.server_side_validated=a.data.validated,t.server_side_validation_messages=a.data.responses,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:return e.prev=11,t.$vs.loading.close("#loading--container > .con-vs-loading"),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,9,11,14]])})))()},uploadImageArchive:function(){var t=this;return l(s.a.mark((function e(){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.$refs.images_archive_file.files).length){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.$vs.loading({container:"#loading--container"}),(r=new FormData).append("file",a[0]),e.next=9,t.$http.post("/api/admin/data-import/product/extract-images",r);case 9:(n=e.sent).data.success&&(t.successNotification(n.data.message),t.fetchImportImages()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.prev=16,t.$vs.loading.close("#loading--container > .con-vs-loading"),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})))()}},watch:{"validation.headerDifferences":function(t){t.length?this.validated=!1:this.validated=!0}}},u=a("KHd+"),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vs-popup",{attrs:{title:"Product Import Facts",active:t.help_popup},on:{"update:active":function(e){t.help_popup=e}}},[a("h5",[t._v("Excel file must contain following headers.")]),t._v(" "),a("div",{staticClass:"px-3 mt-4 mb-4"},t._l(t.validation.requiredHeaders,(function(e){return a("p",{key:"help-"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"chevron_right"}}),t._v(" \n        "),a("strong",[t._v(t._s(e))])],1)})),0)]),t._v(" "),a("vs-popup",{staticClass:"popup-xl",attrs:{title:"Import Images",active:t.product_images_popup},on:{"update:active":function(e){t.product_images_popup=e}}},[a("div",{staticClass:"vx-row"},t._l(t.import_files,(function(e,r){return a("div",{key:"import-image-"+r,staticClass:"vx-col md:w-1/4 mb-4 text-center"},[a("img",{staticClass:"w-full",staticStyle:{border:"2px solid #ddd"},attrs:{src:"/import_images/"+e.filename+"."+e.extension,alt:""}}),t._v("\n        "+t._s(e.filename+"."+e.extension)+"\n      ")])})),0)]),t._v(" "),a("vs-popup",{staticClass:"popup-xl",attrs:{title:"Server side validation errors",active:t.server_side_error_popup},on:{"update:active":function(e){t.server_side_error_popup=e}}},[a("div",{staticClass:"px-3 mt-4 mb-4"},t._l(t.server_side_validation_messages,(function(e,r){return a("div",{key:"server-validation-"+r,staticClass:"mb-3"},[a("h3",{staticClass:"mb-2"},[t._v(t._s(r))]),t._v(" "),a("ul",{staticClass:"ml-4"},t._l(e,(function(e){return a("li",[a("vs-icon",{attrs:{icon:"chevron_right"}}),t._v("\n             "+t._s(e)+"\n          ")],1)})),0)])})),0)]),t._v(" "),a("div",{staticClass:"vx-row vs-con-loading__container",attrs:{id:"loading--container"}},[a("div",{staticClass:"vx-col w-full"},[a("vx-card",{staticClass:"mb-4"},[a("h3",[t._v("Import Prooduct Images")]),t._v(" "),a("div",{staticClass:"vx-row mt-4"},[a("div",{staticClass:"vx-col w-1/2"},[a("div",{staticClass:"text-center"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.uploadImageArchive.apply(null,arguments)}}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"size:10024",expression:"'size:10024'"}],ref:"images_archive_file",attrs:{required:"",type:"file",name:"thumbnail"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"\n                    vs-component vs-button vs-button-primary vs-button-filled\n                  ",attrs:{type:"submit"}},[t._v("\n                  Upload Images Archive File\n                ")])]),t._v(" "),a("p",{staticClass:"text-warning mt-4"},[t._v("\n                Uploading archive file will replace previously uploaded zip\n                file on server.\n              ")])])]),t._v(" "),a("div",{staticClass:"vx-col w-1/2 text-center"},[a("h3",{staticClass:"mt-4"},[t._v("Current Images")]),t._v(" "),a("h1",[t._v(t._s(t.import_files.length))]),t._v(" "),a("br"),t._v(" "),a("vs-button",{on:{click:function(e){t.product_images_popup=!0}}},[t._v("View Images")])],1)])]),t._v(" "),a("vx-card",[a("h3",[t._v("\n          Products Import\n          "),a("vs-icon",{staticClass:"cursor-pointer",attrs:{icon:"help",size:"small"},on:{click:function(e){t.help_popup=!0}}})],1),t._v(" "),t.importing?a("div",[a("div",{staticClass:"text-center mt-5"},[a("h4",[t._v("Please wait while importing products.")]),t._v(" "),a("vs-progress",{attrs:{height:12,percent:t.import_progress,color:"success"}},[t._v("success")]),t._v(" "),a("p",[t._v(t._s(t.import_progress)+"% Completed.")])],1)]):a("div",[a("div",{staticClass:"mb-8 mt-4"},[a("import-excel",{attrs:{onSuccess:t.loadDataInTable}})],1),t._v(" "),t.validation.headerDifferences.length?a("vs-alert",{staticClass:"h-auto",attrs:{color:"danger"}},[t._l(t.validation.headerDifferences,(function(e){return a("p",{key:"error"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"error_outline"}}),t._v(" \n              "),a("strong",[t._v(t._s(e))]),t._v(" field is missing.\n            ")],1)})),t._v(" "),a("p",[t._v("\n              NOTE: Please review the uploaded file and make sure all the\n              headers are correct.\n            ")])],2):t._e(),t._v(" "),t.validated?a("vs-alert",{staticStyle:{height:"40px !important"},attrs:{color:"success",icon:"thumb_up_alt"}},[a("span",[t._v("All the headers are correct. Review the data and start\n              importing.")])]):t._e(),t._v(" "),Object.keys(t.server_side_validation_messages).length?a("vs-alert",{staticClass:"h-auto",attrs:{color:"danger",icon:"thumb_down_alt"}},[a("span",[t._v("Server side product validation failed.  ")]),t._v(" "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.server_side_error_popup=!0}}},[t._v("Click here to peek the validation results.")])]):t._e(),t._v(" "),t.server_side_validated?a("vs-alert",{staticClass:"h-auto mt-3",attrs:{color:"success",icon:"thumb_up_alt"}},[a("span",[t._v("Server side product validation passed. Now you may proceed to\n              import the products.")])]):t._e(),t._v(" "),t.tableData.length&&t.header.length?a("vs-table",{attrs:{stripe:"",pagination:"","max-items":20,search:"",data:t.tableData},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},t._l(t.header,(function(e,n){return a("vs-td",{key:""+e+n},[t._v(t._s("string"==typeof r[s][e]?r[s][e].substring(0,100):r[s][e]))])})),1)}))}}],null,!1,2365644624)},[a("template",{slot:"header"},[a("h4",[t._v(t._s(t.sheetName))])]),t._v(" "),a("template",{slot:"thead"},t._l(t.header,(function(e){return a("vs-th",{key:e,attrs:{"sort-key":e}},[t._v(t._s(e))])})),1)],2):t._e(),t._v(" "),Object.keys(t.server_side_validation_messages).length?a("vs-alert",{staticClass:"h-auto mt-2 mb-2",attrs:{color:"danger",icon:"thumb_down_alt"}},[a("span",[t._v("Server side product validation failed.  ")]),t._v(" "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.server_side_error_popup=!0}}},[t._v("Click here to peek the validation results.")])]):t._e(),t._v(" "),t.validated&&!t.server_side_validated?a("vs-button",{on:{click:t.validateProducts}},[t._v("Validate Uploaded File")]):t._e(),t._v(" "),t.validated&&t.server_side_validated?a("vs-button",{on:{click:t.importProducts}},[t._v("Start Import")]):t._e()],1)])],1)])],1)}),[],!1,null,null,null);e.default=p.exports},1:function(t,e){},2:function(t,e){},Ivpn:function(t,e,a){var r={"./core/ImportUsers":"XmsB","./core/ImportUsers.vue":"XmsB","./ecommerce/ImportProducts":"0VA/","./ecommerce/ImportProducts.vue":"0VA/","./ecommerce/UpdateProductPrice":"QLK3","./ecommerce/UpdateProductPrice.vue":"QLK3","./musics/ImportArtists":"yfNK","./musics/ImportArtists.vue":"yfNK"};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=n,t.exports=s,s.id="Ivpn"},QLK3:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r),n=a("+/GB"),i=(a("LvDl"),a("Snq/")),o=a.n(i),c=a("Gd76"),l=a.n(c);function d(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}function u(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(t){d(n,r,s,i,o,"next",t)}function o(t){d(n,r,s,i,o,"throw",t)}i(void 0)}))}}var p={components:{ImportExcel:n.a,"v-select":o.a},data:function(){return{help_popup:!1,importing:!1,import_progress:0,tableData:[],header:[],sheetName:"",import_files:[],export_data:{category_id:""},dropdown_categories:[]}},mounted:function(){this.fetchCategoryDropdown()},methods:{fetchCategoryDropdown:function(){var t=this;return u(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/admin/product-categories-dropdown",e.next=4,t.$http.get("/api/admin/product-categories-dropdown");case 4:a=e.sent,t.dropdown_categories=a.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.errorNotification("Something went wrong!! Please retry");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},loadDataInTable:function(t){var e=t.results,a=t.header,r=t.meta;this.header=a,this.tableData=e,this.sheetName=r.sheetName},resetComponenet:function(){this.header=[],this.tableData=[],this.sheetName="",this.validated=!1,this.importing=!1,this.import_progress=0},importProducts:function(){var t=this;return u(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.importing=!0,a={onUploadProgress:function(e){var a=Math.floor(100*e.loaded/e.total);t.import_progress=a-5}},e.next=5,t.$http.post("/api/admin/data-import/product/update-product-details",{products:t.tableData},a);case 5:r=e.sent,console.log(r.data),r.data.success&&t.successNotification(r.data.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.errorNotification("Something went wrong while importing!! Please recheck the data and try again");case 13:return e.prev=13,t.import_progress=100,t.resetComponenet(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])})))()},exportProducts:function(){var t=this;return u(s.a.mark((function e(){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.export_data.category_id,r="/api/admin/data-import/price-import/export-products?category_id=".concat(a),e.next=5,t.$http.post(r,{},{headers:{"Content-Disposition":"attachment; filename=testfile.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},responseType:"arraybuffer"});case 5:n=e.sent,l()(n.data,"products_export.xlsx"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},v=a("KHd+"),h=Object(v.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vx-row vs-con-loading__container",attrs:{id:"loading--container"}},[a("div",{staticClass:"vx-col w-full"},[a("vx-card",{staticClass:"mb-3",attrs:{title:"Export Products on Price Update Format"}},[a("div",{staticClass:"vx-col w-full mb-4"},[a("label",{staticClass:"vs-input--label",attrs:{for:""}},[t._v("Category")]),t._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{options:t.dropdown_categories,label:"category_full_name",value:"id",reduce:function(t){return t.id},name:"category_ids"},model:{value:t.export_data.category_id,callback:function(e){t.$set(t.export_data,"category_id",e)},expression:"export_data.category_id"}}),t._v(" "),t.errors.has("category_ids")?a("span",{staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("category_ids")))]):t._e(),t._v(" "),a("vs-button",{staticClass:"mt-4",attrs:{size:"small"},on:{click:t.exportProducts}},[t._v("Export Products")])],1)]),t._v(" "),a("vx-card",[a("h3",[t._v("\n          Products Import\n          "),a("vs-icon",{staticClass:"cursor-pointer",attrs:{icon:"help",size:"small"},on:{click:function(e){t.help_popup=!0}}})],1),t._v(" "),t.importing?a("div",[a("div",{staticClass:"text-center mt-5"},[a("h4",[t._v("Please wait while importing products.")]),t._v(" "),a("vs-progress",{attrs:{height:12,percent:t.import_progress,color:"success"}},[t._v("success")]),t._v(" "),a("p",[t._v(t._s(t.import_progress)+"% Completed.")])],1)]):a("div",[a("div",{staticClass:"mb-8 mt-4"},[a("import-excel",{attrs:{onSuccess:t.loadDataInTable}})],1),t._v(" "),t.tableData.length&&t.header.length?a("vs-table",{attrs:{stripe:"",pagination:"","max-items":20,search:"",data:t.tableData},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},t._l(t.header,(function(e,n){return a("vs-td",{key:""+e+n},[t._v(t._s("string"==typeof r[s][e]?r[s][e].substring(0,100):r[s][e]))])})),1)}))}}],null,!1,2365644624)},[a("template",{slot:"header"},[a("h4",[t._v(t._s(t.sheetName))])]),t._v(" "),a("template",{slot:"thead"},t._l(t.header,(function(e){return a("vs-th",{key:e,attrs:{"sort-key":e}},[t._v(t._s(e))])})),1)],2):t._e(),t._v(" "),a("vs-button",{on:{click:t.importProducts}},[t._v("Start Import")])],1)])],1)])])}),[],!1,null,null,null);e.default=h.exports},XmsB:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r),n=a("+/GB"),i=a("LvDl"),o=a.n(i);function c(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}var l={components:{ImportExcel:n.a},data:function(){return{help_popup:!1,importing:!1,import_progress:0,tableData:[],validated:!1,validation:{requiredHeaders:["first_name","middle_name","last_name","contact_number","district","province","municipality","ward_no","locality","gender","dob_bs","ethnicity","religion","father_name","father_mobile_number","mother_name","mother_mobile_number"],headerDifferences:[]},header:[],sheetName:""}},methods:{loadDataInTable:function(t){var e=t.results,a=t.header,r=t.meta;this.header=a,this.tableData=e,this.sheetName=r.sheetName,this.validation.headerDifferences=o.a.difference(this.validation.requiredHeaders,this.header)},resetComponenet:function(){this.header=[],this.tableData=[],this.sheetName="",this.validated=!1,this.importing=!1,this.import_progress=0},importStudents:function(){var t,e=this;return(t=s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.importing=!0,a={onUploadProgress:function(t){var a=Math.floor(100*t.loaded/t.total);e.import_progress=a-5}},t.next=5,e.$http.post("/api/admin/data-import/students",{students:e.tableData},a);case 5:(r=t.sent).data.success&&e.successNotification(r.data.message),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorNotification("Something went wrong while importing!! Please recheck the data and try again");case 12:return t.prev=12,e.import_progress=100,e.resetComponenet(),t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[0,9,12,16]])})),function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(t){c(n,r,s,i,o,"next",t)}function o(t){c(n,r,s,i,o,"throw",t)}i(void 0)}))})()}},watch:{"validation.headerDifferences":function(t){t.length?this.validated=!1:this.validated=!0}}},d=a("KHd+"),u=Object(d.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vs-popup",{attrs:{title:"Student Import Facts",active:t.help_popup},on:{"update:active":function(e){t.help_popup=e}}},[a("h5",[t._v("Excel file must contain following headers.")]),t._v(" "),a("div",{staticClass:"px-3 mt-4 mb-4"},t._l(t.validation.requiredHeaders,(function(e){return a("p",{key:"help-"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"chevron_right"}}),t._v(" \n        "),a("strong",[t._v(t._s(e))])],1)})),0),t._v(" "),a("p",{staticClass:"text-warning"},[t._v("\n      You must include above listed headers in excel file. You may leave field empty if there is no data e.g\n      "),a("strong",[t._v("middle_name")])])]),t._v(" "),a("vx-card",{staticClass:"vs-con-loading__container",attrs:{id:"loading--container"}},[a("h3",[t._v("\n      Students Data Import\n      "),a("vs-icon",{staticClass:"cursor-pointer",attrs:{icon:"help",size:"small"},on:{click:function(e){t.help_popup=!0}}})],1),t._v(" "),t.importing?a("div",[a("div",{staticClass:"text-center mt-5"},[a("h4",[t._v("Please wait while importing students.")]),t._v(" "),a("vs-progress",{attrs:{height:12,percent:t.import_progress,color:"success"}},[t._v("success")]),t._v(" "),a("p",[t._v(t._s(t.import_progress)+"% Completed.")])],1)]):a("div",[a("div",{staticClass:"mb-8 mt-4"},[a("import-excel",{attrs:{onSuccess:t.loadDataInTable}})],1),t._v(" "),t.validation.headerDifferences.length?a("vs-alert",{staticClass:"h-auto",attrs:{color:"danger"}},[t._l(t.validation.headerDifferences,(function(e){return a("p",{key:"error"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"error_outline"}}),t._v(" \n          "),a("strong",[t._v(t._s(e))]),t._v(" field is missing.\n        ")],1)})),t._v(" "),a("p",[t._v("NOTE: Please review the uploaded file and make sure all the headers are correct.")])],2):t._e(),t._v(" "),t.validated?a("vs-alert",{staticStyle:{height:"40px !important"},attrs:{color:"success",icon:"thumb_up_alt"}},[a("span",[t._v("All the headers are correct. Review the data and start importing.")])]):t._e(),t._v(" "),t.tableData.length&&t.header.length?a("vs-table",{attrs:{stripe:"",pagination:"","max-items":20,search:"",data:t.tableData},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},t._l(t.header,(function(e,n){return a("vs-td",{key:""+e+n},[t._v(t._s(r[s][e]))])})),1)}))}}],null,!1,3156374335)},[a("template",{slot:"header"},[a("h4",[t._v(t._s(t.sheetName))])]),t._v(" "),a("template",{slot:"thead"},t._l(t.header,(function(e){return a("vs-th",{key:e,attrs:{"sort-key":e}},[t._v(t._s(e))])})),1)],2):t._e(),t._v(" "),a("vs-button",{attrs:{size:"small",disabled:!t.validated},on:{click:t.importStudents}},[t._v("Start Import")])],1)])],1)}),[],!1,null,null,null);e.default=u.exports},jWRg:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r);function n(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}var i={data:function(){return{active_module:{},import_modules:[]}},mounted:function(){this.getImportModules()},methods:{getImportModules:function(){var t,e=this;return(t=s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/api/admin/get-import-modules");case 2:a=t.sent,e.import_modules=a.data.data;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function o(t){n(i,r,s,o,c,"next",t)}function c(t){n(i,r,s,o,c,"throw",t)}o(void 0)}))})()},getComponentName:function(){try{if(Object.keys(this.active_module).length)return a("Ivpn")("./".concat(this.active_module.module,"/").concat(this.active_module.component)).default}catch(t){}}}},o=a("KHd+"),c=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vx-card",[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/2"},[a("vs-select",{staticClass:"w-full",attrs:{label:"Import Type",name:"active_module"},model:{value:t.active_module,callback:function(e){t.active_module=e},expression:"active_module"}},t._l(t.import_modules,(function(t){return a("vs-select-item",{key:t.slug,attrs:{value:t,text:t.name}})})),1)],1)])]),t._v(" "),Object.keys(t.active_module).length?a("div",[a(t.getComponentName(),{tag:"component",staticClass:"mt-3"})],1):t._e()],1)}),[],!1,null,null,null);e.default=c.exports},yfNK:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r),n=a("+/GB"),i=a("LvDl"),o=a.n(i);function c(t,e,a,r,s,n,i){try{var o=t[n](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(r,s)}var l={components:{ImportExcel:n.a},data:function(){return{help_popup:!1,importing:!1,import_progress:0,tableData:[],validated:!1,validation:{requiredHeaders:["first_name","middle_name","last_name","contact_number","district","province","municipality","ward_no","locality","gender","dob_bs","ethnicity","religion","father_name","father_mobile_number","mother_name","mother_mobile_number"],headerDifferences:[]},header:[],sheetName:""}},methods:{loadDataInTable:function(t){var e=t.results,a=t.header,r=t.meta;this.header=a,this.tableData=e,this.sheetName=r.sheetName,this.validation.headerDifferences=o.a.difference(this.validation.requiredHeaders,this.header)},resetComponenet:function(){this.header=[],this.tableData=[],this.sheetName="",this.validated=!1,this.importing=!1,this.import_progress=0},importStudents:function(){var t,e=this;return(t=s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.importing=!0,a={onUploadProgress:function(t){var a=Math.floor(100*t.loaded/t.total);e.import_progress=a-5}},t.next=5,e.$http.post("/api/admin/data-import/students",{students:e.tableData},a);case 5:(r=t.sent).data.success&&e.successNotification(r.data.message),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorNotification("Something went wrong while importing!! Please recheck the data and try again");case 12:return t.prev=12,e.import_progress=100,e.resetComponenet(),t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[0,9,12,16]])})),function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(t){c(n,r,s,i,o,"next",t)}function o(t){c(n,r,s,i,o,"throw",t)}i(void 0)}))})()}},watch:{"validation.headerDifferences":function(t){t.length?this.validated=!1:this.validated=!0}}},d=a("KHd+"),u=Object(d.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vs-popup",{attrs:{title:"Student Import Facts",active:t.help_popup},on:{"update:active":function(e){t.help_popup=e}}},[a("h5",[t._v("Excel file must contain following headers.")]),t._v(" "),a("div",{staticClass:"px-3 mt-4 mb-4"},t._l(t.validation.requiredHeaders,(function(e){return a("p",{key:"help-"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"chevron_right"}}),t._v(" \n        "),a("strong",[t._v(t._s(e))])],1)})),0),t._v(" "),a("p",{staticClass:"text-warning"},[t._v("\n      You must include above listed headers in excel file. You may leave field empty if there is no data e.g\n      "),a("strong",[t._v("middle_name")])])]),t._v(" "),a("vx-card",{staticClass:"vs-con-loading__container",attrs:{id:"loading--container"}},[a("h3",[t._v("\n      Students Data Import\n      "),a("vs-icon",{staticClass:"cursor-pointer",attrs:{icon:"help",size:"small"},on:{click:function(e){t.help_popup=!0}}})],1),t._v(" "),t.importing?a("div",[a("div",{staticClass:"text-center mt-5"},[a("h4",[t._v("Please wait while importing students.")]),t._v(" "),a("vs-progress",{attrs:{height:12,percent:t.import_progress,color:"success"}},[t._v("success")]),t._v(" "),a("p",[t._v(t._s(t.import_progress)+"% Completed.")])],1)]):a("div",[a("div",{staticClass:"mb-8 mt-4"},[a("import-excel",{attrs:{onSuccess:t.loadDataInTable}})],1),t._v(" "),t.validation.headerDifferences.length?a("vs-alert",{staticClass:"h-auto",attrs:{color:"danger"}},[t._l(t.validation.headerDifferences,(function(e){return a("p",{key:"error"+e,staticClass:"mb-1"},[a("vs-icon",{attrs:{icon:"error_outline"}}),t._v(" \n          "),a("strong",[t._v(t._s(e))]),t._v(" field is missing.\n        ")],1)})),t._v(" "),a("p",[t._v("NOTE: Please review the uploaded file and make sure all the headers are correct.")])],2):t._e(),t._v(" "),t.validated?a("vs-alert",{staticStyle:{height:"40px !important"},attrs:{color:"success",icon:"thumb_up_alt"}},[a("span",[t._v("All the headers are correct. Review the data and start importing.")])]):t._e(),t._v(" "),t.tableData.length&&t.header.length?a("vs-table",{attrs:{stripe:"",pagination:"","max-items":20,search:"",data:t.tableData},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},t._l(t.header,(function(e,n){return a("vs-td",{key:""+e+n},[t._v(t._s(r[s][e]))])})),1)}))}}],null,!1,3156374335)},[a("template",{slot:"header"},[a("h4",[t._v(t._s(t.sheetName))])]),t._v(" "),a("template",{slot:"thead"},t._l(t.header,(function(e){return a("vs-th",{key:e,attrs:{"sort-key":e}},[t._v(t._s(e))])})),1)],2):t._e(),t._v(" "),a("vs-button",{attrs:{size:"small",disabled:!t.validated},on:{click:t.importStudents}},[t._v("Start Import")])],1)])],1)}),[],!1,null,null,null);e.default=u.exports}}]);