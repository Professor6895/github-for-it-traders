(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{SCBn:function(t,e,s){"use strict";s.r(e);var a=s("o0o1"),n=s.n(a);function r(t,e,s,a,n,r,i){try{var o=t[r](i),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(a,n)}function i(t){return function(){var e=this,s=arguments;return new Promise((function(a,n){var i=t.apply(e,s);function o(t){r(i,a,n,o,c,"next",t)}function c(t){r(i,a,n,o,c,"throw",t)}o(void 0)}))}}var o={data:function(){return{loading:!0,emi_requests:{data:[],per_page:0,total:0,last_page:0},table_options:{current_page:1},search_keyword:""}},mounted:function(){this.fetchEmiRequests()},methods:{fetchEmiRequests:function(){var t=this;return i(n.a.mark((function e(){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading||t.$vs.loading({container:"#loading--container"}),e.prev=1,e.next=4,t.$http.get("/api/admin/emi-requests",{params:{page:t.table_options.current_page,search:t.search_keyword}});case 4:s=e.sent,t.emi_requests=s.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.errorNotification("Something went wrong!! Please retry");case 11:return e.prev=11,t.$vs.loading.close("#loading--container > .con-vs-loading"),t.loading=!1,e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[1,8,11,15]])})))()},deleteEmiRequest:function(t){var e=this;return i(n.a.mark((function s(){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to delete the EMI Request?",accept:function(){var s=i(n.a.mark((function s(){var a;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$http.delete("/api/admin/emi-requests/".concat(t));case 2:(a=s.sent).data.success?(e.successNotification(a.data.message),e.fetchEmiRequests()):e.errorNotification(a.data.message);case 4:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}()});case 1:case"end":return s.stop()}}),s)})))()}},watch:{"table_options.current_page":function(){this.fetchEmiRequests()}}},c=s("KHd+"),u=Object(c.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("pageLoader"):s("vx-card",{staticClass:"card-padding-5 vs-con-loading__container",attrs:{id:"loading--container"}},[s("vs-table",{attrs:{stripe:"",data:t.emi_requests.data,"max-items":t.emi_requests.per_page,total:t.emi_requests.total,sst:!0},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a,staticClass:"p-4",attrs:{data:e}},[s("vs-td",[s("i",[t._v("\n              "+t._s(e.id)+"\n            ")])]),t._v(" "),s("vs-td",[t._v("\n            "+t._s(e.name?e.name:"")+"\n          ")]),t._v(" "),s("vs-td",[t._v("\n            "+t._s(e.email)+"\n          ")]),t._v(" "),s("vs-td",[t._v("\n            "+t._s(e.product.name)+"\n            "),e.product_attributes?s("span",[t._l(e.product_attributes,(function(e,a){return s("p",[s("strong",[t._v(t._s(a)+": ")]),t._v(t._s(e)+"\n              ")])})),t._v(" "),s("br")],2):t._e()]),t._v(" "),s("vs-td",[t._v("\n            "+t._s(t._f("date_format")(e.created_at,"MMMM Do YYYY, h:mm a"))+"\n          ")]),t._v(" "),s("vs-td",[s("strong",[1==e.status?s("strong",{staticClass:"text-warning"},[t._v("Processing")]):t._e(),t._v(" "),0==e.status?s("strong",{staticClass:"text-danger"},[t._v("Pending")]):t._e(),t._v(" "),2==e.status?s("strong",{staticClass:"text-success"},[t._v("Approved")]):t._e(),t._v(" "),3==e.status?s("strong",{staticClass:"text-success"},[t._v("Finished")]):t._e(),t._v(" "),4==e.status?s("strong",{staticClass:"text-danger"},[t._v("Declined")]):t._e()])]),t._v(" "),s("vs-td",[s("router-link",{attrs:{to:{name:"ecommerce-admin-emi-request-detail",params:{id:e.id}}}},[s("vs-button",{attrs:{size:"small"}},[t._v("Detail")])],1),t._v(" "),s("vs-button",{attrs:{color:"danger",size:"small"},on:{click:function(s){return t.deleteEmiRequest(e.id)}}},[t._v("Delete")])],1)],1)}))}}])},[s("template",{slot:"header"},[s("strong",[t._v("Total :")]),t._v("\n        Â "+t._s(t.emi_requests.total)+"\n\n        "),s("div",{staticClass:"con-input-search vs-table--search"},[s("vs-input",{staticClass:"inline-block",model:{value:t.search_keyword,callback:function(e){t.search_keyword=e},expression:"search_keyword"}}),t._v(" "),s("vs-button",{attrs:{type:"filled",icon:"search"},on:{click:function(e){t.table_options.current_page=1,t.fetchEmiRequests()}}})],1)]),t._v(" "),s("template",{slot:"thead"},[s("vs-th",[t._v("ID")]),t._v(" "),s("vs-th",[t._v("Customer")]),t._v(" "),s("vs-th",[t._v("Email Address")]),t._v(" "),s("vs-th",[t._v("Product")]),t._v(" "),s("vs-th",[t._v("Application Date")]),t._v(" "),s("vs-th",[t._v("Status")]),t._v(" "),s("vs-th",[t._v("Actions")])],1)],2),t._v(" "),s("vs-pagination",{staticClass:"mt-6",attrs:{total:t.emi_requests.last_page},model:{value:t.table_options.current_page,callback:function(e){t.$set(t.table_options,"current_page",e)},expression:"table_options.current_page"}})],1)],1)}),[],!1,null,null,null);e.default=u.exports}}]);