(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{UNzw:function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),s=a.n(r),n=a("uBql"),c=a("Snq/");function o(t,e,a,r,s,n,c){try{var o=t[n](c),i=o.value}catch(t){return void a(t)}o.done?e(i):Promise.resolve(i).then(r,s)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function c(t){o(n,r,s,c,i,"next",t)}function i(t){o(n,r,s,c,i,"throw",t)}c(void 0)}))}}var d={data:function(){return{products:[],dropdown_categories:[],product_data:{select_type:""},campaign_id:"",campaign_products:[]}},components:{"v-select":a.n(c).a},mounted:function(){this.campaign_id=this.$route.params.id,this.getProducts(),this.getCategories(),this.getCampaignProducts()},methods:{getCategories:function(){var t=this;return i(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/admin/product-categories-dropdown",e.next=4,t.$http.get("/api/admin/product-categories-dropdown");case 4:a=e.sent,t.dropdown_categories=a.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.errorNotification("Something went wrong!! Please retry");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},getCampaignProducts:function(){var t=this;return i(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="/api/admin/discount-campaigns/".concat(t.campaign_id,"/get-products"),e.next=4,t.$http.get(a);case 4:r=e.sent,t.campaign_products=r.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.errorNotification("Something went wrong!! Please retry");case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},getProducts:function(){var t=this;return i(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$vs.loading({container:"#loading--container"}),e.prev=1,e.next=4,t.$http.get("/api/admin/vendors/0/products");case 4:a=e.sent,t.products=a.data.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.errorNotification("Something went wrong!! Please retry");case 11:return e.prev=11,t.$vs.loading.close("#loading--container > .con-vs-loading"),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},addProductOnCampaign:function(){var t=this;return i(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$vs.loading({container:"#loading--container"}),e.next=3,t.$validator.validateAll();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,t.$http.post("/api/admin/discount-campaigns/".concat(t.campaign_id,"/add-products"),t.product_data);case 9:(a=e.sent).data.success&&(t.successNotification(a.data.message),t.getCampaignProducts(),t.product_data={select_type:""}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),Object(n.e)(t.errors,e.t0),t.errorNotification("Something went wrong!! Please retry");case 17:return e.prev=17,t.$vs.loading.close("#loading--container > .con-vs-loading"),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,13,17,20]])})))()},removeCampaignProduct:function(t){var e,a=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to remove product from Campaign?",accept:(e=i(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.delete("/api/admin/discount-campaigns/product/".concat(t,"/remove"));case 2:(r=e.sent).data.success?(a.successNotification(r.data.message),a.getCampaignProducts()):a.errorNotification(r.data.message);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})}}},u=a("KHd+"),l=Object(u.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vx-row vs-con-loading__containerrr",attrs:{id:"loading--container"}},[a("div",{staticClass:"vx-col md:w-1/4"},[a("vx-card",{attrs:{title:"Add Products"}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full mb-2"},[a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Select Type",name:"select_type"},model:{value:t.product_data.select_type,callback:function(e){t.$set(t.product_data,"select_type",e)},expression:"product_data.select_type"}},t._l([{text:"Category",value:"category"},{text:"Product",value:"product"}],(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})})),1),t._v(" "),t.errors.has("select_type")?a("span",{staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("select_type")))]):t._e()],1),t._v(" "),"product"==t.product_data.select_type?a("div",{staticClass:"vx-col w-full mb-4"},[a("label",{staticClass:"vs-input--label",attrs:{for:""}},[t._v("Product")]),t._v(" "),a("v-select",{attrs:{options:t.products,label:"name",value:"id",reduce:function(t){return t.id},name:"product_id"},model:{value:t.product_data.product_id,callback:function(e){t.$set(t.product_data,"product_id",e)},expression:"product_data.product_id"}}),t._v(" "),t.errors.has("product_id")?a("span",{staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("product_id")))]):t._e()],1):"category"==t.product_data.select_type?a("div",{staticClass:"vx-col w-full mb-4"},[a("label",{staticClass:"vs-input--label",attrs:{for:""}},[t._v("Category")]),t._v(" "),a("v-select",{attrs:{options:t.dropdown_categories,label:"category_full_name",value:"id",reduce:function(t){return t.id},name:"category_ids"},model:{value:t.product_data.category_id,callback:function(e){t.$set(t.product_data,"category_id",e)},expression:"product_data.category_id"}})],1):t._e(),t._v(" "),a("div",{staticClass:"vx-col w-full mb-2"},[a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"discount_type",label:"Discount Type"},model:{value:t.product_data.discount_type,callback:function(e){t.$set(t.product_data,"discount_type",e)},expression:"product_data.discount_type"}},t._l([{value:1,text:"Money Value"},{value:2,text:"Percentage Value"}],(function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})})),1),t._v(" "),t.errors.has("discount_type")?a("span",{staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("discount_type")))]):t._e()],1),t._v(" "),a("div",{staticClass:"vx-col w-full"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"discount_value",label:"Discount Value",type:"number"},model:{value:t.product_data.discount_value,callback:function(e){t.$set(t.product_data,"discount_value",e)},expression:"product_data.discount_value"}}),t._v(" "),t.errors.has("discount_value")?a("span",{staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("discount_value")))]):t._e()],1),t._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-button",{attrs:{size:"small",type:"relief",color:"primary"},on:{click:t.addProductOnCampaign}},[t._v("Save")])],1)])])],1),t._v(" "),a("div",{staticClass:"vx-col md:w-3/4"},[a("vx-card",{attrs:{title:"Products"}},[a("vs-table",{attrs:{search:"",stripe:"",data:t.campaign_products,"max-items":"40",pagination:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,r){return a("vs-tr",{key:r,attrs:{data:e}},[a("vs-td",[a("img",{attrs:{src:e.product.product_image.thumb,width:"50px",alt:""}})]),t._v(" "),a("vs-td",[t._v(t._s(e.product.name))]),t._v(" "),a("vs-td",[t._v("Rs. "+t._s(e.product.discounted_price)+"\n                "),a("small",{staticStyle:{"text-decoration":"line-through"}},[t._v("Rs. "+t._s(e.product.original_price?e.product.original_price:e.product.price))]),t._v(" "),a("br"),t._v("\n                ("),1==e.discount_type?a("span",[t._v("Rs. ")]):t._e(),t._v("\n                "+t._s(e.discount_value)),2==e.discount_type?a("span",[t._v("% ")]):t._e(),t._v(" Off)\n              ")]),t._v(" "),a("vs-td",[a("vs-button",{staticClass:"table-action--buttons",attrs:{size:"small",radius:"",color:"danger",type:"filled",icon:"delete"},on:{click:function(a){return t.removeCampaignProduct(e.id)}}})],1)],1)}))}}])},[a("template",{slot:"header"},[a("strong",[t._v("Total :")]),t._v("\n             "+t._s(t.campaign_products.length)+"    \n          ")]),t._v(" "),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"email"}},[t._v("Image")]),t._v(" "),a("vs-th",[t._v("Title")]),t._v(" "),a("vs-th",[t._v("Price")]),t._v(" "),a("vs-th",[t._v("Actions")])],1)],2)],1)],1)])])}),[],!1,null,null,null);e.default=l.exports}}]);