(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{MeZ2:function(e,t,a){"use strict";a.r(t);var s=a("o0o1"),r=a.n(s),n=a("U87P"),i=a("uBql"),o=a("5XpT"),l=a("jHpe");a("y1X9"),a("QWvX"),a("hL/g"),a("yr/+");function c(e,t,a,s,r,n,i){try{var o=e[n](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(s,r)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function i(e){c(n,s,r,i,o,"next",e)}function o(e){c(n,s,r,i,o,"throw",e)}i(void 0)}))}}var u={data:function(){return{loading:!0,brands:[],brand_popup:!1,brand:{meta:{}},image_preview:null}},components:{MetaFields:n.a,PrismEditor:o.a},mounted:function(){this.fetchBrands()},methods:{highlighter:function(e){return Object(l.highlight)(e,l.languages.js)},fetchBrands:function(){var e=this;return d(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$http.get("/api/admin/product-brands");case 4:a=t.sent,e.brands=a.data.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.errorNotification("Something went wrong!! Please retry");case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))()},imageUploaded:function(){var e=this.$refs.brand_thumbnail_image.files[0];this.image_preview=URL.createObjectURL(e),this.brand.image=e},clearImage:function(){this.brand.image=null,this.image_preview=null,this.$refs.brand_thumbnail_image.value=""},saveBrand:function(){var e=this;return d(r.a.mark((function t(){var a,s,n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.$vs.loading({container:"#loading--container"}),t.prev=6,a={name:e.brand.name,image:e.brand.image,description:e.brand.description,meta:JSON.stringify(e.brand.meta),custom_code:e.brand.custom_code},s="/api/admin/product-brands",e.brand.id&&(s="/api/admin/product-brands/".concat(e.brand.id),a._method="PATCH"),n=Object(i.a)(a),t.next=13,e.$http.post(s,n);case 13:(o=t.sent).data.success&&(e.successNotification(o.data.message),e.fetchBrands(),e.brand_popup=!1),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),Object(i.e)(e.errors,t.t0),e.errorNotification("Something went wrong! Please retry!!");case 21:return t.prev=21,e.$vs.loading.close("#loading--container > .con-vs-loading"),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,17,21,24]])})))()},editBrand:function(e){this.brand=_.cloneDeep(e),this.image_preview=this.brand.brand_image.thumb,this.brand_popup=!0},deleteBrand:function(e){var t,a=this;this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to delete this brand?",accept:(t=d(r.a.mark((function t(){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$http.delete("/api/admin/product-brands/".concat(e));case 2:(s=t.sent).data.success?(a.successNotification(s.data.message),a.fetchBrands()):a.errorNotification(s.data.message);case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})}},watch:{brand_popup:function(e){e||(this.brand={meta:{}},this.errors.clear(),this.image_preview=null)}}},v=(a("MoRX"),a("KHd+")),m=Object(v.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vs-popup",{staticClass:"popup-lg",attrs:{title:"Brand Detail",active:e.brand_popup},on:{"update:active":function(t){e.brand_popup=t}}},[a("div",{staticClass:"vs-con-loading__container",attrs:{id:"loading--container"}},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"name",label:"Brand Nmae"},model:{value:e.brand.name,callback:function(t){e.$set(e.brand,"name",t)},expression:"brand.name"}}),e._v(" "),a("p",[e.errors.has("name")?a("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))]):e._e()]),e._v(" "),a("div",{staticClass:"w-full mt-4"},[e.image_preview?a("div",{staticClass:"image-preview-container"},[a("div",{staticClass:"text-right float-right mr-10"},[a("vs-button",{staticClass:"image-remove--button",attrs:{radius:"",size:"small",color:"danger",type:"filled","icon-pack":"feather",icon:"icon-x"},on:{click:e.clearImage}})],1),e._v(" "),a("img",{attrs:{src:e.image_preview,alt:""}})]):e._e(),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"image|size:1024",expression:"'image|size:1024'"}],ref:"brand_thumbnail_image",staticClass:"hidden",attrs:{type:"file",name:"thumbnail",accept:"image/*"},on:{change:e.imageUploaded}}),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("thumbnail"),expression:"errors.has('thumbnail')"}],staticClass:"text-danger text-sm mb-3"},[e._v("\n          "+e._s(e.errors.first("thumbnail"))+"\n        ")]),e._v(" "),a("vs-button",{attrs:{color:"primary",type:"border",size:"small"},on:{click:function(t){return e.$refs.brand_thumbnail_image.click()}}},[e._v("Thumbnail Image")])],1),e._v(" "),a("div",{staticClass:"vx-col mt-4"},[a("label",{staticClass:"vs-input--label",attrs:{for:""}},[e._v("Description")]),e._v(" "),a("q-editor",{model:{value:e.brand.description,callback:function(t){e.$set(e.brand,"description",t)},expression:"brand.description"}})],1),e._v(" "),a("MetaFields",{model:{value:e.brand.meta,callback:function(t){e.$set(e.brand,"meta",t)},expression:"brand.meta"}}),e._v(" "),a("div",{staticClass:"vx-col mt-4"},[a("label",{staticClass:"vs-input--label",attrs:{for:""}},[e._v("Custom Code")]),e._v(" "),a("prism-editor",{staticClass:"my-editor",attrs:{"line-numbers":"",highlight:e.highlighter},model:{value:e.brand.custom_code,callback:function(t){e.$set(e.brand,"custom_code",t)},expression:"brand.custom_code"}})],1),e._v(" "),a("vs-button",{staticClass:"mr-3 mt-5",on:{click:e.saveBrand}},[e._v("Submit")])],1)]),e._v(" "),e.loading?a("pageLoader"):a("vx-card",{staticClass:"card-padding-5"},[a("vs-table",{attrs:{search:"",stripe:"",data:e.brands,"max-items":"40",pagination:""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,s){return a("vs-tr",{key:s,attrs:{data:t}},[a("vs-td",[a("img",{attrs:{src:t.brand_image.thumb,alt:"",width:"100px"}})]),e._v(" "),a("vs-td",[e._v(e._s(t.name))]),e._v(" "),a("vs-td",[e._v(e._s(t.slug))]),e._v(" "),a("vs-td",[e._v(e._s(t.images_count)+"    \n            "),a("router-link",{attrs:{to:{name:"admin-product-brands-images",params:{id:t.id}}}},[a("vs-button",{attrs:{size:"small"}},[e._v("View Images")])],1)],1),e._v(" "),a("vs-td",[e.checkPermission("edit-brand")?a("vs-button",{staticClass:"table-action--buttons",attrs:{radius:"",color:"warning",type:"filled",size:"small",icon:"create"},on:{click:function(a){return e.editBrand(t)}}}):e._e(),e._v(" "),e.checkPermission("delete-brand")?a("vs-button",{staticClass:"table-action--buttons",attrs:{radius:"",size:"small",color:"danger",type:"filled",icon:"delete"},on:{click:function(a){return e.deleteBrand(t.id)}}}):e._e()],1)],1)}))}}])},[a("template",{slot:"header"},[a("strong",[e._v("Total :")]),e._v("\n         "+e._s(e.brands.length)+"    \n        "),e._v(" "),e.checkPermission("add-brand")?a("vs-button",{attrs:{color:"primary",size:"small",type:"border"},on:{click:function(t){e.brand_popup=!0}}},[e._v("Add Brand")]):e._e()],1),e._v(" "),a("template",{slot:"thead"},[a("vs-th",[e._v("Image")]),e._v(" "),a("vs-th",{attrs:{"sort-key":"name"}},[e._v("Name")]),e._v(" "),a("vs-th",[e._v("Slug")]),e._v(" "),a("vs-th",[e._v("Images")]),e._v(" "),a("vs-th",[e._v("Actions")])],1)],2)],1)],1)}),[],!1,null,"0005d11e",null);t.default=m.exports},MoRX:function(e,t,a){"use strict";a("o0od")},Ohgj:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".my-editor[data-v-0005d11e]{height:300px;font-family:Fira code,Fira Mono,Consolas,Menlo,Courier,monospace;font-size:14px;line-height:1.5}[dir] .my-editor[data-v-0005d11e]{background:#f3f3f3;padding:5px}.prism-editor__textarea[data-v-0005d11e]:focus{outline:none}",""])},U87P:function(e,t,a){"use strict";var s={props:{value:{type:Object,required:!0},small:{type:Boolean,default:!1}},watch:{value:function(){this.$emit("input",this.value)}}},r=a("KHd+"),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full mt-2",class:{"md:w-1/2":!e.small}},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:70",expression:"'max:70'"}],staticClass:"w-full",attrs:{name:"meta_title",maxlength:"100",label:"Meta Title"},model:{value:e.value.meta_title,callback:function(t){e.$set(e.value,"meta_title",t)},expression:"value.meta_title"}}),e._v(" "),a("p",[e.errors.has("meta_title")?a("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_title")))]):e._e()])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2",class:{"md:w-1/2":!e.small}},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:180",expression:"'max:180'"}],staticClass:"w-full",attrs:{name:"meta_keywords",label:"Meta Keywords",maxlength:"180"},model:{value:e.value.meta_keywords,callback:function(t){e.$set(e.value,"meta_keywords",t)},expression:"value.meta_keywords"}}),e._v(" "),a("p",[e.errors.has("meta_keywords")?a("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_keywords")))]):e._e()])],1),e._v(" "),a("div",{staticClass:"vx-col w-full mt-2"},[a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"max:180",expression:"'max:180'"}],staticClass:"w-full",attrs:{name:"meta_description",label:"Meta Description",maxlength:"180"},model:{value:e.value.meta_description,callback:function(t){e.$set(e.value,"meta_description",t)},expression:"value.meta_description"}}),e._v(" "),a("p",[e.errors.has("meta_description")?a("span",{staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("meta_description")))]):e._e()])],1)])}),[],!1,null,null,null);t.a=n.exports},o0od:function(e,t,a){var s=a("Ohgj");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,r);s.locals&&(e.exports=s.locals)}}]);